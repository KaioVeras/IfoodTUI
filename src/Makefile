# Compilador e flags
CC = gcc
WINCC = x86_64-w64-mingw32-gcc
CFLAGS = -Wall

# Diret칩rios
SRC_DIR = .
SCREENS_DIR = screens

# Busca autom치tica de todos os arquivos .c
SRC_FILES = $(wildcard $(SRC_DIR)/*.c) $(wildcard $(SCREENS_DIR)/*.c)

# Nomes dos execut치veis
OUT = ifood
OUT_WIN = ifood.exe

# ------------------------------
# Regras principais
# ------------------------------

# Compila para Linux
all: $(OUT)

$(OUT): $(SRC_FILES)
	$(CC) $(CFLAGS) $^ -o $@

# Compila para Windows
windows: $(OUT_WIN)

$(OUT_WIN): $(SRC_FILES)
	$(WINCC) $(CFLAGS) $^ -o $@

# Executa no Linux
run: clean all
	./$(OUT)

# Executa o .exe pelo Wine (opcional)
run-win: windows
	wine $(OUT_WIN)

# Limpa os execut치veis
clean:
	rm -f $(OUT) $(OUT_WIN)
